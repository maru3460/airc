# 環境構築

airc を使うための環境構築について説明します。

## 必要な環境

### Node.js

airc を実行するには、**Node.js 18.0.0 以上** が必要です。

#### Node.js のバージョン確認

ターミナル（コマンドプロンプト）で以下のコマンドを実行してください：

```bash
node --version
```

**期待される出力例：**
```
v18.0.0
v20.10.0
v22.0.0
```

`v18.0.0` 以上が表示されれば OK です。

#### Node.js のインストール

バージョンが古い、または Node.js がインストールされていない場合は、以下の方法でインストールしてください。

**推奨: nvm（Node Version Manager）を使う方法**

nvm を使うと、複数のバージョンの Node.js を簡単に管理できます。

**macOS / Linux の場合：**

```bash
# nvm をインストール
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.0/install.sh | bash

# nvm を有効化（ターミナルを再起動するか、以下を実行）
source ~/.bashrc

# Node.js の最新 LTS バージョンをインストール
nvm install --lts

# インストールしたバージョンを使用
nvm use --lts
```

**Windows の場合：**

1. [nvm-windows](https://github.com/coreybutler/nvm-windows/releases) から最新版をダウンロード
2. インストーラーを実行
3. コマンドプロンプトまたは PowerShell で以下を実行：

```powershell
# Node.js の最新 LTS バージョンをインストール
nvm install lts

# インストールしたバージョンを使用
nvm use lts
```

**公式インストーラーを使う方法：**

[Node.js 公式サイト](https://nodejs.org/) から LTS 版をダウンロードしてインストールしてください。

### npm

npm は Node.js と一緒にインストールされるので、別途インストールする必要はありません。

#### npm のバージョン確認

```bash
npm --version
```

**期待される出力例：**
```
9.8.0
10.2.0
```

## airc のインストール

airc は npm パッケージとして公開されているため、インストールは不要です。
`npx` コマンドを使って、その場で実行できます。

### npx とは？

`npx` は、npm パッケージを一時的にダウンロードして実行するコマンドです。
インストールせずに、常に最新版を使うことができます。

## 動作確認

### ヘルプを表示してみる

airc が正しく動作するか確認しましょう：

```bash
npx @maru3460/airc --help
```

**期待される出力：**

```
使い方: airc [オプション]

オプション:
  -p, --project <name>  ダウンロードするプロジェクトを指定 (デフォルト: "default")
  -f, --force           確認なしですべてのファイルを上書き
  -h, --help            ヘルプを表示
```

このような出力が表示されれば、環境構築は完了です！

### バージョン情報を確認する

```bash
npx @maru3460/airc --version
```

**期待される出力例：**
```
0.0.1
```

## トラブルシューティング

### エラー: `command not found: node`

Node.js がインストールされていません。
[Node.js のインストール](#nodejs-のインストール) を参照してください。

### エラー: `npm ERR! code ENOENT`

インターネット接続を確認してください。
npm は GitHub から airc をダウンロードするため、インターネット接続が必要です。

### エラー: `Error: Cannot find module`

Node.js のバージョンが古い可能性があります。
Node.js 18.0.0 以上にアップデートしてください。

### エラー: `permission denied` (macOS / Linux)

権限の問題が発生している可能性があります。
以下のいずれかを試してください：

**方法1: nvm を使う（推奨）**
```bash
# nvm で Node.js をインストールし直す
nvm install --lts
nvm use --lts
```

**方法2: npm のグローバルディレクトリを変更する**
```bash
# npm のグローバルディレクトリをユーザーディレクトリに変更
mkdir ~/.npm-global
npm config set prefix '~/.npm-global'
echo 'export PATH=~/.npm-global/bin:$PATH' >> ~/.bashrc
source ~/.bashrc
```

## 次のステップ

環境構築が完了したら、実際に airc を使ってみましょう！

→ [03_基本的な使い方.md](03_基本的な使い方.md) へ進む
