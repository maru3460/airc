# 要件定義書：GitHub Copilot 設定共有ツール

## 1. プロジェクト概要

### 1.1 プロジェクト名

airc (AI Resource Configurator)

### 1.2 目的

チーム内で GitHub Copilot や Claude の設定ファイル（chatmodes、prompts、instructions 等）を統一し、npx コマンドで簡単にダウンロード・セットアップできるようにする。

### 1.3 背景

- チームメンバーがそれぞれ異なる Copilot/Claude 設定を使用している
- プロジェクトごとに推奨される設定が異なる
- 新規メンバーのオンボーディング時に設定共有が煩雑
- 設定ファイルの更新を全員に反映させるのが困難

### 1.4 期待される効果

- 設定ファイルの一元管理
- チーム全体での開発スタイルの統一
- 新規メンバーのセットアップ時間短縮
- プロジェクトごとの最適な設定の即座適用

## 2. 機能要件

### 2.1 基本機能

#### F-001: デフォルト設定のダウンロード

- **概要**: プロジェクト指定なしで実行した場合、デフォルトプロジェクトの全設定ファイルをダウンロードする
- **コマンド**: `npx @maru3460/airc`
- **対象ファイル**: 全タイプ（chatmodes, prompts, claude, root）

#### F-002: プロジェクト指定ダウンロード

- **概要**: `-p`オプションで特定プロジェクトの設定をダウンロード
- **コマンド**: `npx @maru3460/airc -p <project-name>`
- **対象プロジェクト**: frontend, backend, mobile 等
- **動作**: 指定プロジェクトの全設定ファイルをダウンロード

#### F-003: タイプ別ダウンロード

- **概要**: `--type`オプションで特定タイプのファイルのみダウンロード
- **コマンド**: `npx @maru3460/airc --type <type>`
- **対象タイプ**:
  - `chatmodes`: `.github/chatmodes/`配下
  - `prompts`: `.github/prompts/`配下
  - `claude`: `.claude/`配下
  - `root`: ルートディレクトリ（CLAUDE.md 等）
- **動作**: 指定タイプのファイルのみダウンロード

#### F-004: 個別ファイルダウンロード

- **概要**: `--file`オプションで特定ファイルのみダウンロード
- **コマンド**: `npx @maru3460/airc --file <filename>`
- **動作**: 指定ファイルを検索してダウンロード

#### F-005: 上書き確認機能

- **概要**: 既存ファイルがある場合、上書き確認を行う
- **動作**:
  - デフォルト: ファイルごとに上書き確認プロンプト表示
  - ユーザー入力: y/N
  - N 選択時: スキップして次のファイルへ

#### F-006: 強制上書き機能

- **概要**: `--force`オプションで確認なしに上書き
- **コマンド**: `npx @maru3460/airc --force`
- **動作**: 全ファイルを確認なしで上書き

### 2.2 情報表示機能

#### F-007: プロジェクト一覧表示

- **概要**: 利用可能なプロジェクト一覧を表示
- **コマンド**: `npx @maru3460/airc --list-projects`
- **表示内容**:
  - プロジェクト名
  - 各プロジェクトの総ファイル数

#### F-008: ヘルプ表示

- **概要**: コマンドの使用方法を表示
- **コマンド**: `npx @maru3460/airc --help`
- **表示内容**:
  - 使用方法
  - オプション一覧
  - 使用例

#### F-009: ダウンロード進捗表示

- **概要**: ダウンロード状況をリアルタイム表示
- **表示内容**:
  - ダウンロード開始メッセージ
  - 各ファイルのダウンロード成功/失敗
  - 完了メッセージ

### 2.3 エラーハンドリング

#### F-010: 存在しないプロジェクトエラー

- **条件**: 指定されたプロジェクトが存在しない
- **動作**: エラーメッセージ表示 + 利用可能なプロジェクト提案

#### F-011: 存在しないファイルエラー

- **条件**: 指定されたファイルがプロジェクト内に存在しない
- **動作**: エラーメッセージ表示

#### F-012: ネットワークエラー

- **条件**: GitHub からのダウンロードに失敗
- **動作**: エラーメッセージ表示 + 継続可能な場合は次のファイルへ

#### F-013: ファイル書き込みエラー

- **条件**: ローカルファイルシステムへの書き込みに失敗
- **動作**: エラーメッセージ表示 + 権限の確認を促す

## 3. 非機能要件

### 3.1 パフォーマンス要件

- **NF-001**: 1 ファイルあたりのダウンロード時間は 3 秒以内
- **NF-002**: 10 ファイルの一括ダウンロードは 30 秒以内

### 3.2 互換性要件

- **NF-003**: Node.js 18.0.0 以降で動作
- **NF-004**: Windows、macOS、Linux で動作

### 3.3 保守性要件

- **NF-005**: プロジェクト追加は設定ファイル編集のみで可能
- **NF-006**: ファイル追加はリポジトリへの push のみで反映

### 3.4 使いやすさ要件

- **NF-007**: npx で実行可能（ローカルインストール不要）
- **NF-008**: 直感的なコマンドオプション
- **NF-009**: わかりやすいエラーメッセージ

## 4. 対象ファイル構成

### 4.1 サポートするディレクトリ

- `.github/chatmodes/` - GitHub Copilot chatmodes
- `.github/prompts/` - GitHub Copilot prompts
- `.claude/` - Claude instructions/context
- ルートディレクトリ - CLAUDE.md 等

### 4.2 ファイル形式

- 主に Markdown 形式（.md）
- その他テキストベースのファイル

## 5. システム制約

### 5.1 技術制約

- Node.js ES モジュール形式
- 外部依存なし（Node.js 標準ライブラリのみ使用）
- GitHub の raw.githubusercontent.com からダウンロード

### 5.2 リポジトリ制約

- パブリックリポジトリまたはアクセス可能なプライベートリポジトリ
- main ブランチからダウンロード

## 6. 運用要件

### 6.1 更新フロー

1. リポジトリの`projects/`ディレクトリにファイル追加/更新
2. GitHub へ push
3. ユーザーは npx コマンド実行で最新版を取得

### 6.2 バージョニング

- npm パッケージのバージョン管理
- 設定ファイル自体はバージョン管理不要（常に最新を取得）

## 7. セキュリティ要件

### 7.1 認証

- パブリックリポジトリの場合: 認証不要
- プライベートリポジトリの場合: GitHub トークン等の認証機能は将来対応

### 7.2 検証

- ダウンロードしたファイルの内容検証は行わない（信頼されたリポジトリからのみ取得）

## 8. 今後の拡張可能性

### 8.1 検討事項

- プライベートリポジトリ対応（GitHub 認証）
- 設定ファイルのバージョン指定ダウンロード
- 設定の差分確認機能
- インタラクティブな選択 UI
- 設定ファイルのバリデーション機能
- 複数リポジトリからのダウンロード

## 9. 用語定義

| 用語         | 定義                                        |
| ------------ | ------------------------------------------- |
| chatmodes    | GitHub Copilot のチャットモード設定ファイル |
| prompts      | GitHub Copilot のプロンプト設定ファイル     |
| instructions | Claude の動作指示ファイル                   |
| プロジェクト | frontend、backend 等の設定セット単位        |
| タイプ       | chatmodes、prompts 等のファイル種別         |

## 10. 承認

| 役割                 | 氏名 | 承認日 |
| -------------------- | ---- | ------ |
| プロジェクトオーナー |      |        |
| 開発リーダー         |      |        |
| レビュワー           |      |        |
